{"ast":null,"code":"import { axiosInstance } from '../store/modules/auth';\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      username: '',\n      password: '',\n      loading: false,\n      error: null\n    };\n  },\n  methods: {\n    async handleSubmit() {\n      this.loading = true;\n      this.error = null;\n      try {\n        const response = await axiosInstance.post('/auth/login', {\n          username: this.username,\n          password: this.password\n        });\n\n        // Сохраняем токен и ID пользователя\n        this.$store.commit('auth/setToken', response.data.access_token);\n        this.$store.commit('auth/setUserId', response.data.user_id);\n\n        // Перенаправляем на чат\n        this.$router.push('/chat');\n      } catch (error) {\n        console.error('Login error:', error);\n        if (error.response) {\n          // Обрабатываем различные коды ошибок\n          switch (error.response.status) {\n            case 401:\n              this.error = 'Неверное имя пользователя или пароль';\n              break;\n            case 404:\n              this.error = 'Пользователь не найден';\n              break;\n            case 422:\n              this.error = 'Пожалуйста, заполните все поля';\n              break;\n            default:\n              this.error = 'Ошибка при входе в систему';\n          }\n        } else {\n          this.error = 'Ошибка соединения с сервером';\n        }\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["axiosInstance","name","data","username","password","loading","error","methods","handleSubmit","response","post","$store","commit","access_token","user_id","$router","push","console","status"],"sources":["/home/dotcore/ichat/frontend/src/components/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <form @submit.prevent=\"handleSubmit\" class=\"login-form\">\n      <h2>Вход в систему</h2>\n      \n      <!-- Сообщение об ошибке -->\n      <div v-if=\"error\" class=\"error-message\">\n        {{ error }}\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"username\">Имя пользователя:</label>\n        <input \n          type=\"text\" \n          id=\"username\"\n          v-model=\"username\"\n          :class=\"{ 'input-error': error }\"\n          required\n        >\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"password\">Пароль:</label>\n        <input \n          type=\"password\" \n          id=\"password\"\n          v-model=\"password\"\n          :class=\"{ 'input-error': error }\"\n          required\n        >\n      </div>\n      \n      <button type=\"submit\" :disabled=\"loading\">\n        {{ loading ? 'Вход...' : 'Войти' }}\n      </button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { axiosInstance } from '../store/modules/auth'\n\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      username: '',\n      password: '',\n      loading: false,\n      error: null\n    }\n  },\n  methods: {\n    async handleSubmit() {\n      this.loading = true\n      this.error = null\n      \n      try {\n        const response = await axiosInstance.post('/auth/login', {\n          username: this.username,\n          password: this.password\n        })\n        \n        // Сохраняем токен и ID пользователя\n        this.$store.commit('auth/setToken', response.data.access_token)\n        this.$store.commit('auth/setUserId', response.data.user_id)\n        \n        // Перенаправляем на чат\n        this.$router.push('/chat')\n      } catch (error) {\n        console.error('Login error:', error)\n        \n        if (error.response) {\n          // Обрабатываем различные коды ошибок\n          switch (error.response.status) {\n            case 401:\n              this.error = 'Неверное имя пользователя или пароль'\n              break\n            case 404:\n              this.error = 'Пользователь не найден'\n              break\n            case 422:\n              this.error = 'Пожалуйста, заполните все поля'\n              break\n            default:\n              this.error = 'Ошибка при входе в систему'\n          }\n        } else {\n          this.error = 'Ошибка соединения с сервером'\n        }\n      } finally {\n        this.loading = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background-color: #f5f5f5;\n}\n\n.login-form {\n  background: white;\n  padding: 30px;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  width: 100%;\n  max-width: 400px;\n}\n\nh2 {\n  margin: 0 0 20px;\n  text-align: center;\n  color: #333;\n}\n\n.form-group {\n  margin-bottom: 20px;\n}\n\nlabel {\n  display: block;\n  margin-bottom: 5px;\n  color: #666;\n}\n\ninput {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 16px;\n}\n\ninput.input-error {\n  border-color: #ff4444;\n}\n\nbutton {\n  width: 100%;\n  padding: 12px;\n  background: #42b983;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 16px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\nbutton:hover {\n  background: #3aa876;\n}\n\nbutton:disabled {\n  background: #ccc;\n  cursor: not-allowed;\n}\n\n.error-message {\n  background: #ffe6e6;\n  color: #ff4444;\n  padding: 10px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  text-align: center;\n}\n</style> "],"mappings":"AAwCA,SAASA,aAAY,QAAS,uBAAsB;AAEpD,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE,KAAK;MACdC,KAAK,EAAE;IACT;EACF,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,YAAYA,CAAA,EAAG;MACnB,IAAI,CAACH,OAAM,GAAI,IAAG;MAClB,IAAI,CAACC,KAAI,GAAI,IAAG;MAEhB,IAAI;QACF,MAAMG,QAAO,GAAI,MAAMT,aAAa,CAACU,IAAI,CAAC,aAAa,EAAE;UACvDP,QAAQ,EAAE,IAAI,CAACA,QAAQ;UACvBC,QAAQ,EAAE,IAAI,CAACA;QACjB,CAAC;;QAED;QACA,IAAI,CAACO,MAAM,CAACC,MAAM,CAAC,eAAe,EAAEH,QAAQ,CAACP,IAAI,CAACW,YAAY;QAC9D,IAAI,CAACF,MAAM,CAACC,MAAM,CAAC,gBAAgB,EAAEH,QAAQ,CAACP,IAAI,CAACY,OAAO;;QAE1D;QACA,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,OAAO;MAC3B,EAAE,OAAOV,KAAK,EAAE;QACdW,OAAO,CAACX,KAAK,CAAC,cAAc,EAAEA,KAAK;QAEnC,IAAIA,KAAK,CAACG,QAAQ,EAAE;UAClB;UACA,QAAQH,KAAK,CAACG,QAAQ,CAACS,MAAM;YAC3B,KAAK,GAAG;cACN,IAAI,CAACZ,KAAI,GAAI,sCAAqC;cAClD;YACF,KAAK,GAAG;cACN,IAAI,CAACA,KAAI,GAAI,wBAAuB;cACpC;YACF,KAAK,GAAG;cACN,IAAI,CAACA,KAAI,GAAI,gCAA+B;cAC5C;YACF;cACE,IAAI,CAACA,KAAI,GAAI,4BAA2B;UAC5C;QACF,OAAO;UACL,IAAI,CAACA,KAAI,GAAI,8BAA6B;QAC5C;MACF,UAAU;QACR,IAAI,CAACD,OAAM,GAAI,KAAI;MACrB;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}