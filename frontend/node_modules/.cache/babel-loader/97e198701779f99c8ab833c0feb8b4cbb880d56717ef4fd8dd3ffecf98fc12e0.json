{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, normalizeClass as _normalizeClass, withDirectives as _withDirectives, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"error-message\"\n};\nconst _hoisted_3 = {\n  class: \"form-group\"\n};\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.handleSubmit && $options.handleSubmit(...args), [\"prevent\"])),\n    class: \"login-form\"\n  }, [_cache[6] || (_cache[6] = _createElementVNode(\"h2\", null, \"Вход в систему\", -1 /* HOISTED */)), _createCommentVNode(\" Сообщение об ошибке \"), $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString($data.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_3, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n    for: \"username\"\n  }, \"Имя пользователя:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.username = $event),\n    class: _normalizeClass({\n      'input-error': $data.error\n    }),\n    onInput: _cache[1] || (_cache[1] = (...args) => $options.clearError && $options.clearError(...args)),\n    required: \"\"\n  }, null, 34 /* CLASS, NEED_HYDRATION */), [[_vModelText, $data.username]])]), _createElementVNode(\"div\", _hoisted_4, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    for: \"password\"\n  }, \"Пароль:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.password = $event),\n    class: _normalizeClass({\n      'input-error': $data.error\n    }),\n    required: \"\"\n  }, null, 2 /* CLASS */), [[_vModelText, $data.password]])]), _createElementVNode(\"button\", {\n    type: \"submit\",\n    disabled: $data.loading\n  }, _toDisplayString($data.loading ? 'Вход...' : 'Войти'), 9 /* TEXT, PROPS */, _hoisted_5)], 32 /* NEED_HYDRATION */)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","onSubmit","_cache","_withModifiers","args","$options","handleSubmit","_createCommentVNode","$data","error","_hoisted_2","_toDisplayString","_hoisted_3","for","type","id","$event","username","_normalizeClass","onInput","clearError","required","_hoisted_4","password","disabled","loading","_hoisted_5"],"sources":["/home/dotcore/ichat/frontend/src/components/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <form @submit.prevent=\"handleSubmit\" class=\"login-form\">\n      <h2>Вход в систему</h2>\n      \n      <!-- Сообщение об ошибке -->\n      <div v-if=\"error\" class=\"error-message\">\n        {{ error }}\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"username\">Имя пользователя:</label>\n        <input \n          type=\"text\" \n          id=\"username\"\n          v-model=\"username\"\n          :class=\"{ 'input-error': error }\"\n          @input=\"clearError\"\n          required\n        >\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"password\">Пароль:</label>\n        <input \n          type=\"password\" \n          id=\"password\"\n          v-model=\"password\"\n          :class=\"{ 'input-error': error }\"\n          required\n        >\n      </div>\n      \n      <button type=\"submit\" :disabled=\"loading\">\n        {{ loading ? 'Вход...' : 'Войти' }}\n      </button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { axiosInstance } from '../store/modules/auth'\n\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      username: '',\n      password: '',\n      loading: false,\n      error: null\n    }\n  },\n  methods: {\n    clearError() {\n      this.error = null\n    },\n    async handleSubmit() {\n      this.loading = true\n      this.error = null\n      \n      try {\n        const response = await axiosInstance.post('/auth/login', {\n          username: this.username,\n          password: this.password\n        })\n        \n        // Сохраняем токен и ID пользователя\n        this.$store.commit('auth/setToken', response.data.access_token)\n        this.$store.commit('auth/setUserId', response.data.user_id)\n        \n        // Перенаправляем на чат\n        this.$router.push('/chat')\n      } catch (error) {\n        console.error('Login error:', error)\n        \n        if (error.response) {\n          // Обрабатываем различные коды ошибок\n          switch (error.response.status) {\n            case 401:\n              this.error = 'Неверное имя пользователя или пароль'\n              break\n            case 404:\n              this.error = 'Пользователь не найден'\n              break\n            case 422:\n              this.error = 'Пожалуйста, заполните все поля'\n              break\n            default:\n              this.error = 'Ошибка при входе в систему'\n          }\n        } else {\n          this.error = 'Ошибка соединения с сервером'\n        }\n      } finally {\n        this.loading = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background-color: #f5f5f5;\n}\n\n.login-form {\n  background: white;\n  padding: 30px;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  width: 100%;\n  max-width: 400px;\n}\n\nh2 {\n  margin: 0 0 20px;\n  text-align: center;\n  color: #333;\n}\n\n.form-group {\n  margin-bottom: 20px;\n}\n\nlabel {\n  display: block;\n  margin-bottom: 5px;\n  color: #666;\n}\n\ninput {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 16px;\n}\n\ninput.input-error {\n  border-color: #ff4444;\n}\n\nbutton {\n  width: 100%;\n  padding: 12px;\n  background: #42b983;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 16px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\nbutton:hover {\n  background: #3aa876;\n}\n\nbutton:disabled {\n  background: #ccc;\n  cursor: not-allowed;\n}\n\n.error-message {\n  background: #ffe6e6;\n  color: #ff4444;\n  padding: 10px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  text-align: center;\n}\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAAiB;;EAD9BC,GAAA;EAMwBD,KAAK,EAAC;;;EAInBA,KAAK,EAAC;AAAY;;EAYlBA,KAAK,EAAC;AAAY;mBAtB7B;;uBACEE,mBAAA,CAoCM,OApCNC,UAoCM,GAnCJC,mBAAA,CAkCO;IAlCAC,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAFjBC,cAAA,KAAAC,IAAA,KAE2BC,QAAA,CAAAC,YAAA,IAAAD,QAAA,CAAAC,YAAA,IAAAF,IAAA,CAAY;IAAER,KAAK,EAAC;gCACzCI,mBAAA,CAAuB,YAAnB,gBAAc,sBAElBO,mBAAA,yBAA4B,EACjBC,KAAA,CAAAC,KAAK,I,cAAhBX,mBAAA,CAEM,OAFNY,UAEM,EAAAC,gBAAA,CADDH,KAAA,CAAAC,KAAK,oBAPhBF,mBAAA,gBAUMP,mBAAA,CAUM,OAVNY,UAUM,G,0BATJZ,mBAAA,CAA+C;IAAxCa,GAAG,EAAC;EAAU,GAAC,mBAAiB,sB,gBACvCb,mBAAA,CAOC;IANCc,IAAI,EAAC,MAAM;IACXC,EAAE,EAAC,UAAU;IAdvB,uBAAAb,MAAA,QAAAA,MAAA,MAAAc,MAAA,IAemBR,KAAA,CAAAS,QAAQ,GAAAD,MAAA;IAChBpB,KAAK,EAhBhBsB,eAAA;MAAA,eAgBmCV,KAAA,CAAAC;IAAK;IAC7BU,OAAK,EAAAjB,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAe,UAAA,IAAAf,QAAA,CAAAe,UAAA,IAAAhB,IAAA,CAAU;IAClBiB,QAAQ,EAAR;2DAHSb,KAAA,CAAAS,QAAQ,E,KAOrBjB,mBAAA,CASM,OATNsB,UASM,G,0BARJtB,mBAAA,CAAqC;IAA9Ba,GAAG,EAAC;EAAU,GAAC,SAAO,sB,gBAC7Bb,mBAAA,CAMC;IALCc,IAAI,EAAC,UAAU;IACfC,EAAE,EAAC,UAAU;IA1BvB,uBAAAb,MAAA,QAAAA,MAAA,MAAAc,MAAA,IA2BmBR,KAAA,CAAAe,QAAQ,GAAAP,MAAA;IAChBpB,KAAK,EA5BhBsB,eAAA;MAAA,eA4BmCV,KAAA,CAAAC;IAAK;IAC9BY,QAAQ,EAAR;0CAFSb,KAAA,CAAAe,QAAQ,E,KAMrBvB,mBAAA,CAES;IAFDc,IAAI,EAAC,QAAQ;IAAEU,QAAQ,EAAEhB,KAAA,CAAAiB;sBAC5BjB,KAAA,CAAAiB,OAAO,8CAlClBC,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}